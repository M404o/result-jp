<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindscape Japan - å®Œå…¨ç‰ˆãƒ‡ãƒ¢è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', 'Yu Gothic UI', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 25%, #fecfef 75%, #ffc3a0 100%);
            background-size: 400% 400%;
            animation: gradientFlow 15s ease infinite;
            min-height: 100vh;
            color: #2d3748;
            overflow-x: hidden;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: sparkle 3s infinite;
            pointer-events: none;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
            50% { opacity: 1; transform: scale(1) rotate(180deg); }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Progress Bar */
        .progress-section {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            padding: 1rem 2rem;
            z-index: 100;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.08);
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 154, 158, 0.2);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff9a9e, #fecfef, #ffc3a0);
            border-radius: 20px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #6b7280;
            text-align: center;
            font-weight: 500;
        }

        /* Main Glass Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 30px;
            padding: 3rem;
            backdrop-filter: blur(20px);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin-top: 20px;
            transform: translateY(20px);
            opacity: 0;
            animation: slideInUp 0.8s ease-out forwards;
            min-height: 400px;
        }

        .step-badge {
            display: inline-block;
            padding: 0.6rem 1.5rem;
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            color: white;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 20px rgba(255, 154, 158, 0.3);
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #2d3748, #4a5568);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #6b7280;
            margin-bottom: 2.5rem;
            line-height: 1.6;
        }

        /* Demo Badge */
        .demo-badge {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 1rem 2rem;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.3);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .demo-badge h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .demo-badge p {
            opacity: 0.9;
            font-size: 1rem;
        }

        /* Profile Form */
        .form-group {
            margin-bottom: 1.8rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: #374151;
            font-size: 1rem;
        }

        .glass-input {
            width: 100%;
            padding: 1.2rem 1.8rem;
            border: 2px solid rgba(255, 154, 158, 0.3);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            font-size: 1rem;
            color: #374151;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .glass-input:focus {
            outline: none;
            border-color: #ff9a9e;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 
                0 8px 25px rgba(255, 154, 158, 0.2),
                0 0 0 3px rgba(255, 154, 158, 0.1);
            transform: translateY(-2px);
        }

        .glass-input::placeholder {
            color: #9ca3af;
        }

        /* Department Grid */
        .department-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.2rem;
            margin-top: 1rem;
        }

        .dept-card {
            padding: 1.8rem;
            border: 2px solid rgba(255, 154, 158, 0.25);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .dept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }

        .dept-card:hover {
            border-color: rgba(255, 154, 158, 0.5);
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(255, 154, 158, 0.25);
        }

        .dept-card:hover::before {
            left: 100%;
        }

        .dept-card.selected {
            border-color: #ff9a9e;
            background: rgba(255, 154, 158, 0.15);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px rgba(255, 154, 158, 0.3);
        }

        .dept-icon {
            font-size: 2.2rem;
            margin-bottom: 0.8rem;
            display: block;
        }

        .dept-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.4rem;
            font-size: 1.1rem;
        }

        .dept-desc {
            font-size: 0.9rem;
            color: #6b7280;
            line-height: 1.4;
        }

        /* Question Section */
        .question-section {
            display: none;
        }

        .question-section.active {
            display: block;
            animation: slideInUp 0.6s ease-out;
        }

        .question-title {
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #2d3748;
            line-height: 1.4;
        }

        .question-subtitle {
            font-size: 1rem;
            color: #6b7280;
            margin-bottom: 2.5rem;
            line-height: 1.6;
        }

        /* Choice Options */
        .choices-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .choice-button {
            padding: 1.2rem 1.5rem;
            border: 2px solid rgba(255, 154, 158, 0.25);
            background: rgba(255, 255, 255, 0.6);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 1rem;
            color: #374151;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .choice-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 154, 158, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .choice-button:hover {
            border-color: rgba(255, 154, 158, 0.4);
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 154, 158, 0.2);
        }

        .choice-button:hover::before {
            left: 100%;
        }

        .choice-button.selected {
            border-color: #ff9a9e;
            background: rgba(255, 154, 158, 0.15);
            color: #2d3748;
            font-weight: 600;
            transform: translateY(-2px);
        }

        /* Free Text Area */
        .glass-textarea {
            width: 100%;
            min-height: 180px;
            padding: 1.5rem;
            border: 2px solid rgba(255, 154, 158, 0.3);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            font-size: 1rem;
            font-family: inherit;
            color: #374151;
            resize: vertical;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .glass-textarea:focus {
            outline: none;
            border-color: #ff9a9e;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 
                0 8px 25px rgba(255, 154, 158, 0.2),
                0 0 0 3px rgba(255, 154, 158, 0.1);
        }

        .glass-textarea::placeholder {
            color: #9ca3af;
            font-style: italic;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            gap: 1rem;
        }

        .glass-button {
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .glass-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .glass-button:hover::before {
            left: 100%;
        }

        .btn-back {
            background: rgba(255, 255, 255, 0.6);
            color: #6b7280;
            border: 2px solid rgba(255, 154, 158, 0.3);
        }

        .btn-back:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .btn-next {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            color: white;
            border: 2px solid transparent;
            box-shadow: 0 8px 25px rgba(255, 154, 158, 0.4);
        }

        .btn-next:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 35px rgba(255, 154, 158, 0.5);
        }

        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Hidden sections */
        .hidden {
            display: none;
        }

        /* Result Display */
        .result-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 2rem;
            margin-top: 2rem;
            backdrop-filter: blur(15px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-content {
            line-height: 1.7;
            color: #4a5568;
        }

        .alert-section {
            background: linear-gradient(135deg, #fed7d7, #fbb6ce);
            border: 2px solid #f56565;
            border-radius: 20px;
            padding: 1.5rem;
            margin: 2rem 0;
            color: #2d3748;
        }

        .alert-title {
            color: #c53030;
            font-weight: 700;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .tag {
            background: rgba(255, 154, 158, 0.2);
            color: #2d3748;
            padding: 0.3rem 1rem;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
            border: 1px solid rgba(255, 154, 158, 0.3);
        }

        /* Loading State */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            backdrop-filter: blur(5px);
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #ff9a9e;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            font-size: 1.2rem;
            text-align: center;
            line-height: 1.6;
        }

        /* Animations */
        @keyframes slideInUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .glass-card {
                padding: 2rem 1.5rem;
                margin-top: 80px;
            }

            .title {
                font-size: 2rem;
            }

            .department-grid {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .glass-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-section" id="progressSection">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">è³ªå• 1 / 20</div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">
            ã‚ãªãŸã®å¿ƒã‚’åˆ†æã—ã¦ã„ã¾ã™...<br>
            å°‘ã€…ãŠå¾…ã¡ãã ã•ã„ âœ¨
        </div>
    </div>

    <div class="container">
        <!-- Welcome & Profile Section -->
        <div class="glass-card" id="welcomeSection">
            <div class="demo-badge">
                <h3>ğŸ¨ Mindscape Japan - å®Œå…¨ç‰ˆãƒ‡ãƒ¢</h3>
                <p>è¨ºæ–­ã‹ã‚‰è©³ç´°åˆ†æã¾ã§ã€ä¸€ç”»é¢ã§ä½“é¨“ã§ãã‚‹ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç‰ˆã§ã™</p>
            </div>
            
            <div class="step-badge">ä¼æ¥­å‘ã‘å¿ƒç†ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆ</div>
            <h1 class="title">ã“ã“ã‚ã®ã‚­ãƒ£ãƒ³ãƒã‚¹è¨ºæ–­ - å®Œå…¨ç‰ˆ</h1>
            <p class="subtitle">
                å¾“æ¥­å“¡ã®å¿ƒç†çŠ¶æ…‹ã‚’æ·±ãç†è§£ã—ã€æ—©æœŸé›¢è·é˜²æ­¢ã‚„è·å ´ç’°å¢ƒæ”¹å–„ã«æ´»ç”¨ã™ã‚‹åŒ…æ‹¬çš„ãªã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
                ã“ã®ãƒ‡ãƒ¢ã§ã¯ã€è¨ºæ–­ã‹ã‚‰è©³ç´°ãªåˆ†æçµæœã¾ã§å…¨ã¦ã®æ©Ÿèƒ½ã‚’ä½“é¨“ã„ãŸã ã‘ã¾ã™ã€‚
            </p>
            
            <div class="profile-section">
                <div class="form-group">
                    <label class="form-label" for="userName">ãŠåå‰</label>
                    <input type="text" id="userName" class="glass-input" placeholder="ãŠåå‰ã‚’ãŠèã‹ã›ãã ã•ã„" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="userAge">å¹´é½¢</label>
                    <input type="number" id="userAge" class="glass-input" placeholder="å¹´é½¢ã‚’ãŠèã‹ã›ãã ã•ã„" min="18" max="100" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ãŠä»•äº‹ãƒ»æ‰€å±</label>
                    <div class="department-grid">
                        <div class="dept-card" data-department="creative">
                            <div class="dept-icon">ğŸ¨</div>
                            <div class="dept-title">ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–</div>
                            <div class="dept-desc">ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ä¼ç”»ãƒ»åˆ¶ä½œ</div>
                        </div>
                        <div class="dept-card" data-department="tech">
                            <div class="dept-icon">ğŸ’»</div>
                            <div class="dept-title">æŠ€è¡“ãƒ»IT</div>
                            <div class="dept-desc">é–‹ç™ºãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ»IT</div>
                        </div>
                        <div class="dept-card" data-department="sales">
                            <div class="dept-icon">ğŸ“ˆ</div>
                            <div class="dept-title">å–¶æ¥­ãƒ»æ¥å®¢</div>
                            <div class="dept-desc">å–¶æ¥­ãƒ»è²©å£²ãƒ»ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒãƒ¼ãƒˆ</div>
                        </div>
                        <div class="dept-card" data-department="manager">
                            <div class="dept-icon">ğŸ‘¥</div>
                            <div class="dept-title">ç®¡ç†ãƒ»ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ</div>
                            <div class="dept-desc">ç®¡ç†è·ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼ãƒ»çµŒå–¶</div>
                        </div>
                        <div class="dept-card" data-department="general">
                            <div class="dept-icon">ğŸ“‹</div>
                            <div class="dept-title">äº‹å‹™ãƒ»ä¸€èˆ¬è·</div>
                            <div class="dept-desc">äº‹å‹™ãƒ»çµŒç†ãƒ»ç·å‹™</div>
                        </div>
                        <div class="dept-card" data-department="parttime">
                            <div class="dept-icon">â°</div>
                            <div class="dept-title">ãƒ‘ãƒ¼ãƒˆãƒ»ã‚¢ãƒ«ãƒã‚¤ãƒˆ</div>
                            <div class="dept-desc">ãƒ‘ãƒ¼ãƒˆãƒ»å¥‘ç´„ãƒ»ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹</div>
                        </div>
                        <div class="dept-card" data-department="support">
                            <div class="dept-icon">ğŸ¤</div>
                            <div class="dept-title">ã‚µãƒãƒ¼ãƒˆãƒ»ã‚±ã‚¢</div>
                            <div class="dept-desc">ä»‹è­·ãƒ»åŒ»ç™‚ãƒ»æ•™è‚²ãƒ»æ”¯æ´</div>
                        </div>
                        <div class="dept-card" data-department="student">
                            <div class="dept-icon">ğŸ“š</div>
                            <div class="dept-title">å­¦ç”Ÿ</div>
                            <div class="dept-desc">å¤§å­¦ç”Ÿãƒ»å°‚é–€å­¦ç”Ÿãƒ»é™¢ç”Ÿ</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <div></div>
                <button class="glass-button btn-next" id="startAssessment" disabled>è¨ºæ–­ã‚’å§‹ã‚ã‚‹ â†’</button>
            </div>
        </div>

        <!-- Question Section -->
        <div class="glass-card question-section" id="questionSection">
            <div class="step-badge" id="questionStep">è³ªå• 1 / 20</div>
            <h2 class="question-title" id="questionTitle"></h2>
            <p class="question-subtitle" id="questionSubtitle"></p>
            
            <!-- Choice Questions -->
            <div class="choices-container" id="choicesContainer"></div>
            
            <!-- Free Text Questions -->
            <textarea class="glass-textarea hidden" id="freeTextArea" placeholder="ãŠæ°—æŒã¡ã‚’è‡ªç”±ã«ãŠèã‹ã›ãã ã•ã„..."></textarea>
            
            <div class="nav-buttons">
                <button class="glass-button btn-back" id="prevButton" onclick="previousQuestion()">â† å‰ã¸</button>
                <button class="glass-button btn-next" id="nextButton" onclick="nextQuestion()" disabled>æ¬¡ã¸ â†’</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”Ÿæˆ
        function createSparkles() {
            for (let i = 0; i < 15; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 3 + 's';
                document.body.appendChild(sparkle);
            }
        }

        // Japanese Department Questions
        const departmentQuestions = {
            creative: [
                "æœ€è¿‘ã€ãŠä»•äº‹ã§å‰µä½œã™ã‚‹å–œã³ã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ã‚ãªãŸã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒå‘¨ã‚Šã®æ–¹ã«è©•ä¾¡ã•ã‚Œã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å–ã‚Šçµ„ã‚€ã¨ãã€ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¾ã™ã‹ï¼Ÿ",
                "è¡Œãè©°ã¾ã‚Šã‚’æ„Ÿã˜ã‚‹ã“ã¨ã¯ã‚ˆãã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã§è‡ªç”±ã«è¡¨ç¾ã§ãã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ä»Šã®ç›®æ¨™ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "æœ€è¿‘ã®ä½œå“ã«æº€è¶³ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "å‘¨ã‚Šã‹ã‚‰ã®æ„è¦‹ã‚„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã‚‚ã‚‰ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãƒãƒ¼ãƒ ã®æ–¹å‘æ€§ã«å…±æ„Ÿã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã«ã‚„ã‚ŠãŒã„ã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ"
            ],
            tech: [
                "ä»Šã®ã‚¹ã‚­ãƒ«ã«è‡ªä¿¡ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã®å½¹å‰²ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "æŠ€è¡“çš„ãªãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚’æ¥½ã—ã‚ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "é›£ã—ã„å•é¡Œã‚’è§£æ±ºã§ããŸã¨ãã€é”æˆæ„Ÿã‚’æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ã‚ãªãŸã®è²¢çŒ®ãŒèªã‚ã‚‰ã‚Œã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ä»Šã®ä»•äº‹é‡ã¯é©åˆ‡ã ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚„ç’°å¢ƒãŒæ•´ã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ãŠç–²ã‚Œã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã®ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ãŒå°†æ¥ã®ç›®æ¨™ã«ç¹‹ãŒã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ"
            ],
            sales: [
                "ãŠå®¢æ§˜ã¨ã®ã‚„ã‚Šã¨ã‚Šã«æº€è¶³ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ä¸Šå¸ã‚„ç®¡ç†è€…ã«ç†è§£ã—ã¦ã‚‚ã‚‰ãˆã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ç›®æ¨™ã‚„æœŸå¾…å€¤ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã®å¾Œã€ç²¾ç¥çš„ã«ãŠç–²ã‚Œã‚’æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ãŠå®¢æ§˜ã‹ã‚‰ä¿¡é ¼ã•ã‚Œã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ãŠå®¢æ§˜ã®èª²é¡Œã‚’è§£æ±ºã§ãã‚‹è‡ªä¿¡ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã®ä¾¡å€¤ã‚’æ„Ÿã˜ã‚‰ã‚Œãªã„æ™‚ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "æ—¥ã€…ã®æ¥­å‹™é‡ã¯é©åˆ‡ã ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "åŒåƒšã‹ã‚‰ã®ã‚µãƒãƒ¼ãƒˆã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ã“ã®è·ç¨®ã§ã®å°†æ¥ã«å¸Œæœ›ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ"
            ],
            manager: [
                "ãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦ã®åˆ¤æ–­ã«è‡ªä¿¡ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®æ°—æŒã¡ã‚’ç†è§£ã§ãã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "ä¸Šå±¤éƒ¨ã¨ã®é€£æºãŒã†ã¾ãã„ã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ãƒãƒ¼ãƒ å†…ã®å•é¡Œã«å¯¾å‡¦ã§ãã‚‹è‡ªä¿¡ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "éƒ¨ä¸‹ã‚„ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰ã®ä¿¡é ¼ã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "è‡ªåˆ†ã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã«ã¤ã„ã¦æŒ¯ã‚Šè¿”ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "è²¬ä»»ã«ã‚ˆã‚‹ã‚¹ãƒˆãƒ¬ã‚¹ã¯ç®¡ç†ã§ãã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "çŠ¶æ³ã«å¿œã˜ã¦ã‚„ã‚Šæ–¹ã‚’å¤‰ãˆã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãƒãƒ¼ãƒ ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã†ã¾ãã„ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ã‚ãªãŸã®ãƒ“ã‚¸ãƒ§ãƒ³ãŒãƒãƒ¼ãƒ ã«ä¼ã‚ã£ã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ"
            ],
            general: [
                "æ¯æ—¥ã®æ¥­å‹™ã«ã‚„ã‚ŠãŒã„ã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã«æ„å‘³ã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "è·å ´ã§ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ä¸Šå¸ã‹ã‚‰ã®ã‚µãƒãƒ¼ãƒˆã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã®æœŸå¾…å€¤ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "æˆé•·ã®æ©Ÿä¼šãŒã‚ã‚‹ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "è·å ´ã§å­¤ç‹¬ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ä»Šã®æ¥­å‹™é‡ã¯é©åˆ‡ã ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "ä¼šè­°ã‚„æ‰“ã¡åˆã‚ã›ã§æ„è¦‹ã‚’è¨€ã„ã‚„ã™ã„ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ä»•äº‹ã¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã®ãƒãƒ©ãƒ³ã‚¹ã«å¸Œæœ›ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ"
            ],
            parttime: [
                "è·å ´ã§å¹³ç­‰ã«æ‰±ã‚ã‚Œã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã®å®‰å®šæ€§ã«å®‰å¿ƒæ„Ÿã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "æ¯æ—¥ã®å½¹å‰²ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "æ­£ç¤¾å“¡ã®æ–¹ã‹ã‚‰ã‚‚å¤§åˆ‡ã«ã•ã‚Œã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "ãƒãƒ¼ãƒ ã®æƒ…å ±å…±æœ‰ã‹ã‚‰é™¤å¤–ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ã‚·ãƒ•ãƒˆã‚„å‹¤å‹™æ™‚é–“ã¯èª¿æ•´ã—ã‚„ã™ã„ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "å›°ã£ãŸã¨ãã«ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "å°†æ¥ã¸ã®ä¸å®‰ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ãŠä»•äº‹ã®æŸ”è»Ÿæ€§ã«æº€è¶³ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "è·å ´ã‚„ãƒãƒ¼ãƒ ã¨ã®ç¹‹ãŒã‚Šã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ"
            ],
            support: [
                "ãŠä»•äº‹ã«ã‚„ã‚ŠãŒã„ã¨å……å®Ÿæ„Ÿã‚’æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ã‚ãªãŸã®åŠªåŠ›ãŒèªã‚ã‚‰ã‚Œã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "æ„Ÿæƒ…çš„ãªè² æ‹…ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "å›°é›£ãªçŠ¶æ³ã§ãƒãƒ¼ãƒ ã‹ã‚‰ã®ã‚µãƒãƒ¼ãƒˆã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ç›¸æ‰‹ã®æ–¹ã¨ã®é©åˆ‡ãªè·é›¢ã‚’ä¿ã¦ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "å…±æ„Ÿã—ã™ããšã«è‡ªåˆ†ã‚’å®ˆã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "è¤‡é›‘ãªçŠ¶æ³ã«å¯¾å‡¦ã™ã‚‹æº–å‚™ãŒã§ãã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
                "è·å ´ç’°å¢ƒã¯å®‰å…¨ã ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "å¤§å¤‰ãªä¸€æ—¥ã®å¾Œã€å¿ƒã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹æ™‚é–“ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "ã‚ãªãŸã®ãŠä»•äº‹ãŒç¤¾ä¼šã«è‰¯ã„å½±éŸ¿ã‚’ä¸ãˆã¦ã„ã‚‹ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ"
            ],
            student: [
                "æœ€è¿‘ã®å­¦æ¥­ã«æº€è¶³ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "å°†æ¥ã®ç›®æ¨™ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "å‹‰å¼·ã‚„èª²é¡Œã®ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "å…ˆç”Ÿã‚„æ•™æˆã‹ã‚‰ã®ã‚µãƒãƒ¼ãƒˆã‚’æ„Ÿã˜ã‚‰ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ã‚¯ãƒ©ã‚¹ãƒ¡ãƒ¼ãƒˆã‚„åŒç´šç”Ÿã¨ã®é–¢ä¿‚ã¯è‰¯å¥½ã§ã™ã‹ï¼Ÿ",
                "è‡ªåˆ†ã®å°‚æ”»ã‚„åˆ†é‡ã«èˆˆå‘³ã‚’æŒã¡ç¶šã‘ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "èª²å¤–æ´»å‹•ã‚„ã‚µãƒ¼ã‚¯ãƒ«ã«å‚åŠ ã—ã¦æ¥½ã—ã‚“ã§ã„ã¾ã™ã‹ï¼Ÿ",
                "å­¦æ¥­ã¨ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã®ãƒãƒ©ãƒ³ã‚¹ã¯å–ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "å°±è·ã‚„é€²è·¯ã«ã¤ã„ã¦ä¸å®‰ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
                "å¤§å­¦ç”Ÿæ´»å…¨ä½“ã«æº€è¶³ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ"
            ]
        };

        // Japanese Reflection Questions (11-19)
        const reflectionQuestions = [
            "æœ€è¿‘ã€ã”è‡ªèº«ã®ä¸­ã§ä½•ã‹å¤‰åŒ–ã‚’æ„Ÿã˜ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
            "èª°ã«ã‚‚è©±ã—ã¦ã„ãªã„ã‘ã‚Œã©ã€å¿ƒã«å¼•ã£ã‹ã‹ã£ã¦ã„ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
            "ã€Œã“ã‚Œã§æœ¬å½“ã«å¤§ä¸ˆå¤«ã‹ãªï¼Ÿã€ã¨æ€ã†ç¬é–“ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
            "ä»Šã€æˆ‘æ…¢ã—ã¦ã„ã‚‹ã“ã¨ã‚„ç„¡ç†ã‚’ã—ã¦ã„ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
            "æœ€è¿‘æ°—ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ã€ã†ã¾ãè¨€è‘‰ã«ã§ããªã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
            "æœ€è¿‘ã€è‡ªåˆ†ã‚’è¤’ã‚ã¦ã‚ã’ãŸã„ã¨æ€ã£ãŸç¬é–“ã¯ã‚ã‚Šã¾ã—ãŸã‹ï¼Ÿ",
            "æœ¬å½“ã¯ã‚„ã‚ŠãŸã„ã®ã«ã€ã§ããšã«ã„ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
            "ã‚‚ã—ä¸€ã¤ã ã‘ã€å‘¨ã‚Šã®äººã«åˆ†ã‹ã£ã¦ã‚‚ã‚‰ã„ãŸã„ã“ã¨ãŒã‚ã‚‹ã¨ã—ãŸã‚‰ï¼Ÿ",
            "ä»Šã€èª°ã‹ã«ä¼ãˆãŸã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹ã¨ã—ãŸã‚‰ã€ã©ã‚“ãªã“ã¨ã§ã™ã‹ï¼Ÿ"
        ];

        // Heart Landscape Question (20)
        const heartQuestion = {
            title: "ã‚ãªãŸã®å¿ƒã®é¢¨æ™¯",
            subtitle: "ä»Šã®ã‚ãªãŸã®å¿ƒã‚’ã€é¢¨æ™¯ã‚„å ´é¢ã¨ã—ã¦è‡ªç”±ã«è¡¨ç¾ã—ã¦ã¿ã¦ãã ã•ã„ã€‚è‰²ã€éŸ³ã€é›°å›²æ°—ã€å¤©æ°—ã€äººã®å­˜åœ¨ãªã©ã€å¿ƒã«æµ®ã‹ã‚“ã ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’3ã€œ5è¡Œã§æã„ã¦ã¿ã¦ãã ã•ã„ã€‚",
            placeholder: "å¤•æš®ã‚Œã®é™ã‹ãªæ£®... æ³¢ãŒå„ªã—ãå²¸è¾ºã«å¯„ã›ã¦ã„ã‚‹... æš–ã‹ã„å…‰ã«åŒ…ã¾ã‚ŒãŸéƒ¨å±‹... é›¨ä¸ŠãŒã‚Šã®è™¹... ã©ã‚“ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™..."
        };

        // Global variables
        let currentQuestion = 0;
        let selectedDepartment = '';
        let userProfile = {};
        let answers = [];
        let currentQuestions = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            createSparkles();
            setupDepartmentSelection();
            setupStartButton();
        });

        function setupDepartmentSelection() {
            const deptCards = document.querySelectorAll('.dept-card');
            
            deptCards.forEach(card => {
                card.addEventListener('click', function() {
                    deptCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDepartment = this.dataset.department;
                    checkStartButtonState();
                });
            });

            document.getElementById('userName').addEventListener('input', checkStartButtonState);
            document.getElementById('userAge').addEventListener('input', checkStartButtonState);
        }

        function checkStartButtonState() {
            const name = document.getElementById('userName').value.trim();
            const age = document.getElementById('userAge').value;
            const startButton = document.getElementById('startAssessment');
            
            if (name && age && selectedDepartment) {
                startButton.disabled = false;
            } else {
                startButton.disabled = true;
            }
        }

        function setupStartButton() {
            document.getElementById('startAssessment').addEventListener('click', function() {
                userProfile = {
                    name: document.getElementById('userName').value.trim(),
                    age: parseInt(document.getElementById('userAge').value),
                    department: selectedDepartment
                };
                
                startAssessment();
            });
        }

        function buildQuestionsArray() {
            const deptQuestions = departmentQuestions[selectedDepartment];
            
            currentQuestions = [
                ...deptQuestions.map(q => ({ type: 'choice', question: q })),
                ...reflectionQuestions.map(q => ({ type: 'text', question: q })),
                {
                    type: 'text',
                    question: heartQuestion.title,
                    subtitle: heartQuestion.subtitle,
                    placeholder: heartQuestion.placeholder
                }
            ];
            
            answers = new Array(currentQuestions.length).fill('');
        }

        function startAssessment() {
            buildQuestionsArray();
            
            const welcomeSection = document.getElementById('welcomeSection');
            welcomeSection.style.transition = 'opacity 0.3s ease';
            welcomeSection.style.opacity = '0';
            
            setTimeout(() => {
                welcomeSection.style.display = 'none';
                
                const progressSection = document.getElementById('progressSection');
                progressSection.style.display = 'block';
                
                const questionSection = document.getElementById('questionSection');
                questionSection.style.display = 'block';
                questionSection.classList.add('active');
                
                setTimeout(() => {
                    showQuestion(0);
                }, 100);
                
            }, 300);
        }

        function showQuestion(questionIndex) {
            currentQuestion = questionIndex;
            const question = currentQuestions[questionIndex];
            
            updateProgress();
            
            document.getElementById('questionStep').textContent = `è³ªå• ${questionIndex + 1} / ${currentQuestions.length}`;
            document.getElementById('questionTitle').textContent = question.question;
            document.getElementById('questionSubtitle').textContent = question.subtitle || '';
            
            const choicesContainer = document.getElementById('choicesContainer');
            const freeTextArea = document.getElementById('freeTextArea');
            
            choicesContainer.innerHTML = '';
            freeTextArea.classList.add('hidden');
            
            if (question.type === 'choice') {
                showChoiceQuestion();
            } else {
                showTextQuestion(question);
            }
            
            updateNavigationButtons();
            restorePreviousAnswer();
        }

        function showChoiceQuestion() {
            const choicesContainer = document.getElementById('choicesContainer');
            const choices = [
                "ã¨ã¦ã‚‚ãã†æ€ã†",
                "ãã†æ€ã†", 
                "ã©ã¡ã‚‰ã§ã‚‚ãªã„",
                "ãã†æ€ã‚ãªã„",
                "å…¨ããã†æ€ã‚ãªã„"
            ];

            choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.className = 'choice-button';
                button.textContent = choice;
                button.addEventListener('click', () => selectChoice(index, choice));
                choicesContainer.appendChild(button);
            });
        }

        function showTextQuestion(question) {
            const textArea = document.getElementById('freeTextArea');
            textArea.classList.remove('hidden');
            textArea.placeholder = question.placeholder || 'ãŠæ°—æŒã¡ã‚’è‡ªç”±ã«ãŠèã‹ã›ãã ã•ã„...';
            textArea.addEventListener('input', updateTextAnswer);
        }

        function selectChoice(index, choice) {
            document.querySelectorAll('.choice-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            document.querySelectorAll('.choice-button')[index].classList.add('selected');
            answers[currentQuestion] = choice;
            document.getElementById('nextButton').disabled = false;
        }

        function updateTextAnswer() {
            const textArea = document.getElementById('freeTextArea');
            answers[currentQuestion] = textArea.value.trim();
            
            const nextButton = document.getElementById('nextButton');
            nextButton.disabled = !textArea.value.trim();
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / currentQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `è³ªå• ${currentQuestion + 1} / ${currentQuestions.length}`;
        }

        function updateNavigationButtons() {
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            
            prevButton.style.visibility = currentQuestion === 0 ? 'hidden' : 'visible';
            nextButton.textContent = currentQuestion === currentQuestions.length - 1 ? 'è¨ºæ–­ã‚’å®Œäº†ã™ã‚‹ â†’' : 'æ¬¡ã¸ â†’';
            nextButton.disabled = true;
        }

        function restorePreviousAnswer() {
            const answer = answers[currentQuestion];
            if (!answer) return;

            const question = currentQuestions[currentQuestion];
            
            if (question.type === 'choice') {
                const buttons = document.querySelectorAll('.choice-button');
                buttons.forEach(btn => {
                    if (btn.textContent === answer) {
                        btn.classList.add('selected');
                        document.getElementById('nextButton').disabled = false;
                    }
                });
            } else {
                document.getElementById('freeTextArea').value = answer;
                document.getElementById('nextButton').disabled = false;
            }
        }

        function nextQuestion() {
            if (currentQuestion === currentQuestions.length - 1) {
                completeAssessment();
            } else {
                showQuestion(currentQuestion + 1);
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        }

        async function completeAssessment() {
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            try {
                const assessmentData = {
                    profile: userProfile,
                    answers: answers,
                    timestamp: new Date().toISOString(),
                    department_questions: answers.slice(0, 10),
                    quiet_responses: answers.slice(10, 19),
                    heart_landscape: answers[19]
                };

                // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ: 2ç§’å¾…æ©Ÿ
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // æ¨¡æ“¬åˆ†æçµæœç”Ÿæˆ
                const mockResult = generateMockResult(assessmentData);
                showCompleteResult(mockResult);
                
            } catch (error) {
                console.error('Assessment error:', error);
            } finally {
                document.getElementById('loadingOverlay').style.display = 'none';
            }
        }

        function generateMockResult(data) {
            // ç°¡å˜ãªãƒªã‚¹ã‚¯è©•ä¾¡ãƒ­ã‚¸ãƒƒã‚¯
            const textResponses = data.quiet_responses.join(' ').toLowerCase();
            const riskKeywords = ['ç–²ã‚Œ', 'ã‚¹ãƒˆãƒ¬ã‚¹', 'ä¸å®‰', 'è¾›ã„', 'å¤§å¤‰', 'å¿ƒé…'];
            const riskCount = riskKeywords.filter(word => textResponses.includes(word)).length;
            const hasAlert = riskCount >= 2;

            return {
                profile: data.profile,
                alert: hasAlert,
                alert_reason: hasAlert ? "è¤‡æ•°ã®æ‡¸å¿µæŒ‡æ¨™ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ" : null,
                quiet_analysis: {
                    overview: hasAlert ? 
                        `${data.profile.department}éƒ¨é–€ã§ã®æ¥­å‹™ã«ãŠã„ã¦ã€ç¾åœ¨å¿ƒç†çš„ãªè² è·ãŒç¢ºèªã•ã‚Œã¾ã™ã€‚` :
                        `${data.profile.department}éƒ¨é–€ã§ã®æ¥­å‹™ã«ãŠã„ã¦ã€å®‰å®šã—ãŸå¿ƒç†çŠ¶æ…‹ãŒç¢ºèªã•ã‚Œã¾ã™ã€‚`,
                    characteristics: hasAlert ? 
                        ["é«˜ã„è²¬ä»»æ„Ÿ", "ç‡ç›´ãªå•é¡Œæ„è­˜", "æ”¹å–„ã¸ã®æ„æ¬²"] :
                        ["ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸè¦–ç‚¹", "å‰å‘ããªå§¿å‹¢", "å®‰å®šã—ãŸé©å¿œ"],
                    quiet_analysis: hasAlert ?
                        `${data.profile.name}æ§˜ã®å›ç­”ã‹ã‚‰ã€è·å ´ç’°å¢ƒã«ãŠã„ã¦ä¸€å®šã®å¿ƒç†çš„è² è·ãŒèª­ã¿å–ã‚Œã¾ã™ã€‚é©åˆ‡ãªã‚µãƒãƒ¼ãƒˆã¨ç¶™ç¶šçš„ãªãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ãŒå¿…è¦ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚` :
                        `${data.profile.name}æ§˜ã®å›ç­”ã‹ã‚‰ã€å¥å…¨ãªè·å ´é©å¿œãŒç¢ºèªã•ã‚Œã¾ã™ã€‚ç¾åœ¨ã®è‰¯å¥½ãªçŠ¶æ…‹ã®ç¶­æŒãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚`,
                    diagnostic_tags: hasAlert ? 
                        ["support_needed", "stress_management", "follow_up_required"] :
                        ["stable_state", "positive_adaptation", "maintenance_focus"],
                    alert_indicators: hasAlert ? 
                        ["é«˜ã„ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«", "å¿ƒç†çš„è² è·ã®è“„ç©"] : []
                },
                final_diagnosis: generateDiagnosis(data.profile, hasAlert),
                image_prompt: `Beautiful landscape inspired by: ${data.heart_landscape}`,
                timestamp: new Date().toISOString()
            };
        }

        function generateDiagnosis(profile, hasAlert) {
            if (hasAlert) {
                return `## ${profile.name}æ§˜ã®å¿ƒç†ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆçµæœ

### ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼
ç¾åœ¨ã®å¿ƒç†çŠ¶æ…‹ã«ãŠã„ã¦ã€è·å ´ç’°å¢ƒã‹ã‚‰ã®å¿ƒç†çš„è² è·ãŒç¢ºèªã•ã‚Œã¦ã„ã¾ã™ã€‚æ—©æœŸã®ä»‹å…¥ã¨ã‚µãƒãƒ¼ãƒˆãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

### ä¸»è¦ãªç™ºè¦‹äº‹é …
â€¢ ${profile.department}éƒ¨é–€ç‰¹æœ‰ã®æ¥­å‹™ã‚¹ãƒˆãƒ¬ã‚¹ãŒå½±éŸ¿ã—ã¦ã„ã‚‹å¯èƒ½æ€§
â€¢ è¤‡æ•°ã®æ‡¸å¿µæŒ‡æ¨™ãŒåŒæ™‚ã«æ¤œå‡ºã•ã‚Œã¦ã„ã‚‹çŠ¶æ³
â€¢ æœ¬äººã®å•é¡Œèªè­˜ã¨æ”¹å–„æ„æ¬²ã¯è‰¯å¥½

### æ¨å¥¨äº‹é …
1. **immediate**: ä¸Šå¸ã¾ãŸã¯HRæ‹…å½“è€…ã¨ã®é¢è«‡è¨­å®š
2. **short-term**: æ¥­å‹™è² è·ã®è¦‹ç›´ã—ã¨èª¿æ•´
3. **long-term**: å®šæœŸçš„ãªãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
å°‚é–€ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã¨ã®ç›¸è«‡ã‚’é€šã˜ãŸè©³ç´°ãªã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã¨å€‹åˆ¥ã‚µãƒãƒ¼ãƒˆãƒ—ãƒ©ãƒ³ã®ç­–å®šã‚’æ¨å¥¨ã—ã¾ã™ã€‚`;
            } else {
                return `## ${profile.name}æ§˜ã®å¿ƒç†ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆçµæœ

### ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼
ç¾åœ¨ã®å¿ƒç†çŠ¶æ…‹ã¯å®‰å®šã—ã¦ãŠã‚Šã€è·å ´ç’°å¢ƒã¸ã®è‰¯å¥½ãªé©å¿œãŒç¢ºèªã•ã‚Œã¦ã„ã¾ã™ã€‚

### ä¸»è¦ãªç™ºè¦‹äº‹é …
â€¢ ${profile.department}éƒ¨é–€ã§ã®æ¥­å‹™ã«å¯¾ã™ã‚‹å‰å‘ããªå–ã‚Šçµ„ã¿
â€¢ ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸå¿ƒç†çŠ¶æ…‹ã®ç¶­æŒ
â€¢ ç¶™ç¶šçš„ãªæˆé•·æ„æ¬²ã¨å®‰å®šã—ãŸè·å ´é©å¿œ

### æ¨å¥¨äº‹é …
1. **maintenance**: ç¾åœ¨ã®è‰¯å¥½ãªçŠ¶æ…‹ã®ç¶™ç¶š
2. **enhancement**: æ›´ãªã‚‹æˆé•·æ©Ÿä¼šã®æä¾›
3. **preventive**: å®šæœŸçš„ãªã‚»ãƒ«ãƒ•ã‚±ã‚¢ã®ç¶™ç¶š

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
ç¾åœ¨ã®è‰¯å¥½ãªçŠ¶æ…‹ã‚’ç¶­æŒã—ã¤ã¤ã€åŠå¹´å¾Œã®å®šæœŸã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã§ç¶™ç¶šçš„ãªãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’æ¨å¥¨ã—ã¾ã™ã€‚`;
            }
        }

        function showCompleteResult(result) {
            const container = document.querySelector('.container');
            
            const resultHTML = `
                <div class="glass-card" id="finalResult">
                    <div class="step-badge">${result.alert ? 'âš ï¸ è¦æ³¨æ„' : 'âœ… è¨ºæ–­å®Œäº†'}</div>
                    <h2 class="title">${result.alert ? 'è©³ç´°åˆ†æãŒå¿…è¦ã§ã™' : 'å¿ƒç†ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆå®Œäº†'}</h2>
                    <p class="subtitle">${result.profile.name}æ§˜ã®åŒ…æ‹¬çš„ãªå¿ƒç†çŠ¶æ…‹åˆ†æçµæœ</p>
                    
                    ${result.alert ? `
                    <div class="alert-section">
                        <h3 class="alert-title">ğŸš¨ æ—©æœŸä»‹å…¥æ¨å¥¨</h3>
                        <p><strong>æ¤œå‡ºç†ç”±:</strong> ${result.alert_reason}</p>
                        <p style="margin-top: 1rem;">
                            ã“ã®çµæœã¯å°‚é–€å®¶ã«ã‚ˆã‚‹è©³ç´°ãªè©•ä¾¡ã¨é©åˆ‡ãªã‚µãƒãƒ¼ãƒˆã®å¿…è¦æ€§ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚
                            HRéƒ¨é–€ãŠã‚ˆã³ç®¡ç†è·è€…ã¸ã®å ±å‘Šã‚’æ¨å¥¨ã—ã¾ã™ã€‚
                        </p>
                    </div>
                    ` : ''}

                    <div class="result-section">
                        <h3 class="result-title">ğŸ§  å¿ƒç†åˆ†æçµæœ</h3>
                        <div class="result-content">
                            <h4 style="color: #2d3748; margin: 1rem 0 0.5rem 0;">å…¨ä½“è©•ä¾¡</h4>
                            <p style="margin-bottom: 1rem;">${result.quiet_analysis.overview}</p>
                            
                            <h4 style="color: #2d3748; margin: 1rem 0 0.5rem 0;">ä¸»è¦ç‰¹å¾´</h4>
                            <ul style="margin-left: 1rem; margin-bottom: 1rem;">
                                ${result.quiet_analysis.characteristics.map(char => `<li>${char}</li>`).join('')}
                            </ul>

                            <h4 style="color: #2d3748; margin: 1rem 0 0.5rem 0;">è©³ç´°åˆ†æ</h4>
                            <p style="margin-bottom: 1rem;">${result.quiet_analysis.quiet_analysis}</p>
                            
                            ${result.quiet_analysis.alert_indicators.length > 0 ? `
                            <h4 style="color: #c53030; margin: 1rem 0 0.5rem 0;">æ‡¸å¿µæŒ‡æ¨™</h4>
                            <ul style="margin-left: 1rem; color: #2d3748;">
                                ${result.quiet_analysis.alert_indicators.map(indicator => `<li>${indicator}</li>`).join('')}
                            </ul>
                            ` : ''}
                        </div>
                    </div>

                    <div class="result-section">
                        <h3 class="result-title">ğŸ“‹ å°‚é–€çš„è¨ºæ–­</h3>
                        <div class="result-content" style="white-space: pre-line;">
                            ${result.final_diagnosis}
                        </div>
                    </div>

                    <div class="result-section">
                        <h3 class="result-title">ğŸ¨ å¿ƒè±¡é¢¨æ™¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h3>
                        <div class="result-content">
                            <p style="background: rgba(255, 154, 158, 0.1); padding: 1rem; border-radius: 10px; font-style: italic;">
                                "${result.image_prompt}"
                            </p>
                            <p style="margin-top: 1rem; color: #6b7280; font-size: 0.9rem;">
                                ã“ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒMidjourneyã«é€ä¿¡ã•ã‚Œã€ã‚ãªãŸå°‚ç”¨ã®å¿ƒè±¡é¢¨æ™¯ã‚¢ãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚
                            </p>
                        </div>
                    </div>

                    <div class="result-section">
                        <h3 class="result-title">ğŸ·ï¸ è¨ºæ–­ã‚¿ã‚°</h3>
                        <div class="tags-container">
                            ${result.quiet_analysis.diagnostic_tags.map(tag => 
                                `<span class="tag">${tag}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="nav-buttons" style="margin-top: 3rem;">
                        ${result.alert ? `
                        <button class="glass-button" style="background: linear-gradient(135deg, #f56565, #fc8181); color: white;" onclick="handleAlert()">
                            ğŸ“ å°‚é–€å®¶ã«ç›¸è«‡
                        </button>
                        <button class="glass-button btn-back" onclick="saveAndExit()">
                            ğŸ’¾ çµæœä¿å­˜
                        </button>
                        ` : `
                        <button class="glass-button btn-next" onclick="downloadPDF()">
                            ğŸ“„ PDFå‡ºåŠ›
                        </button>
                        <button class="glass-button btn-back" onclick="viewAnalytics()">
                            ğŸ“Š çµ±è¨ˆã‚’è¦‹ã‚‹
                        </button>
                        `}
                        <button class="glass-button btn-back" onclick="location.reload()">
                            ğŸ”„ æ–°ã—ã„è¨ºæ–­
                        </button>
                    </div>
                </div>
            `;
            
            container.innerHTML = resultHTML;
        }

        function handleAlert() {
            alert('ğŸš¨ ã‚¢ãƒ©ãƒ¼ãƒˆå‡¦ç†\n\nå°‚é–€å®¶ã¸ã®é€£çµ¡ã¨ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—æ‰‹ç¶šããŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚\nHRéƒ¨é–€ã«è‡ªå‹•é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚');
        }

        function saveAndExit() {
            alert('ğŸ’¾ è¨ºæ–­çµæœã‚’å®‰å…¨ã«ä¿å­˜ã—ã¾ã—ãŸã€‚\n\nä¼æ¥­ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜éŒ²ã•ã‚Œã€é©åˆ‡ãªæ‹…å½“è€…ã«å…±æœ‰ã•ã‚Œã¾ã™ã€‚');
        }

        function downloadPDF() {
            alert('ğŸ“„ PDFç”Ÿæˆæ©Ÿèƒ½\n\nè©³ç´°ãªè¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆã‚’PDFå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚');
        }

        function viewAnalytics() {
            alert('ğŸ“Š ä¼æ¥­çµ±è¨ˆç”»é¢\n\néƒ¨ç½²åˆ¥ã®å¿ƒç†çŠ¶æ…‹åˆ†æã‚„çµŒæ™‚å¤‰åŒ–ã‚’ç¢ºèªã§ãã¾ã™ã€‚');
        }
    </script>
</body>
</html>
